<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="img/favicon.ico">

    <title>Mock3D</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.css" rel="stylesheet"> <!--have bootstrap.min.css-->
	   <link href="css/offcanvas.css" rel="stylesheet"> <!--have bootstrap.min.css-->
    <link href="css/bootstrap-slider.css" rel="stylesheet"> <!--have bootstrap.min.css-->
	
    <!-- Custom styles for this template -->
    <link href="css/mock3d.css" rel="stylesheet">

    <script>
        var r0 = 1.0;
        var g0 = 1.0;
        var b0 = 1.0;

        var r1 = 1.0;
        var g1 = 1.0;
        var b1 = 1.0;

        var rSpec = 1.0;
        var gSpec = 1.0;
        var bSpec = 1.0;
    </script>

    <script id="vertex-shader" type="x-shader/x-vertex">
        attribute vec4 vPosition;
        attribute vec3 vNormal;
        attribute vec2 texcoord;

        varying vec2 f_texcoord;
        varying vec3 fNormal;
        varying vec3 vLight;

        uniform vec2 uMouse;

        void main()
        {
            gl_Position = vPosition;


            vec4 transformedNormal = vec4(vNormal, 1.0) /* + vec4(0.0, 0.0, 0.5, 0.0) */;
            fNormal = normalize(transformedNormal.xyz);

            float x = uMouse.x * 2.0;
            float y = uMouse.y * 2.0;
            float z = 1.0 - x*x - y*y;
            vec3 directionalLight = vec3(x, -y, z);
            vLight = normalize(directionalLight);

            f_texcoord = texcoord;
        }
    </script>

    <script id="fragment-shader" type="x-shader/x-fragment">
        precision mediump float;

        varying vec3 vLight;
        varying vec2 f_texcoord;
        varying vec3 fNormal;

        uniform sampler2D uSamplerColor0, uSamplerColor1, uSamplerNormal, uSamplerForeground, uSamplerBackground;

        vec3 lightColor = vec3(1,1,1);

        uniform float styleBright, styleDark;

        vec3 normal()
        {
            vec4 normalMap = texture2D(uSamplerNormal, vec2(f_texcoord.s, f_texcoord.t) );
            vec3 normalDisplace = normalMap.rgb;
            normalDisplace = 2.0*normalDisplace - 1.0;
            normalDisplace = normalize(normalDisplace);
            return normalize(fNormal + normalDisplace);
        }

        vec3 diffuse(vec3 nn)
        {
            float cosTheta = max( dot(nn, vLight), 0.0);
            vec4 c0 = texture2D(uSamplerColor0, vec2(f_texcoord.s, f_texcoord.t) );
            vec4 c1 = texture2D(uSamplerColor1, vec2(f_texcoord.s, f_texcoord.t) );
            float t = (cosTheta - styleDark) / (styleBright - styleDark);
            return vec3( t * c0.rgb + (1.0 - t) * c1.rgb) * lightColor;
            //return vec3( (1.0 - cosTheta)*c0.rgb +  cosTheta * c1.rgb) * lightColor;
        }

        vec3 spec(vec3 nn)
        {
            vec3 specColor = vec3(0.5,0.5,0.5);
            vec3 viewVector = vec3(0.0, 0.0, 1.0);
            vec3 LVector = normalize(vLight);
            vec3 RVector = 2.0 * dot(nn, LVector) * nn - LVector;
            float spec = pow(dot(RVector, viewVector), 500.0);
            return specColor * spec * lightColor;
        }

        vec3 reflect(vec3 nn)
        {
            // Reflected texture is treated as if it is on a hemisphere 1 unit
            // away from the surface.
            float reflectIntensity = 1.0;
            vec2 reflCoord = f_texcoord + nn.xy * vLight.xy;
            vec4 reflColor = texture2D(uSamplerForeground, reflCoord);
            return reflColor.rgb * reflectIntensity;
        }

        vec3 refract(vec3 nn)
        {
            float refractIntensity = 1.0;
            float ior = 1.5;
            float cos1 = dot(-nn, vec3(0,0,1)); //vLight
            float cos2 = sqrt(1.0 - ior * ior * (1.0 - (cos1 * cos1)) );
            vec3 refract = ior * vec3(0,0,1) + (ior * cos1 - cos2) * nn; // vec3(0,0,1) -> vLight
            vec2 refrCoord = f_texcoord + refract.xy;
            vec4 refrColor = texture2D(uSamplerBackground, refrCoord);
            return refrColor.rgb * refractIntensity;
        }

        vec3 fresnelBlend(vec3 nn, vec3 refl, vec3 refr)
        {
            float cos = dot(nn, vec3(0,0,1) );
            return refl * (1.0 - cos) + refr * cos;
        }

        void main()
        {
          
          vec3 nn = normal();
            vec3 diffuse = diffuse(nn);
            vec3 specular = spec(nn);
            vec3 refl = reflect(nn);
            vec3 refr = refract(nn);
            vec3 fresnel = fresnelBlend(nn, refl, refr);
            //gl_FragColor = vec4(diffuse + specular + 0.5 * fresnel, 1.0);
            gl_FragColor = vec4(diffuse + 0.5 * fresnel, 1.0);

        }
    </script>
  -->
    <script type="text/javascript" src="js/jquery-2.1.4.js"></script>
    <!-- <script type="text/javascript" src="resources/jquery-1.10.2.js"></script> -->
   
    <script type="text/javascript" src="resources/webgl-utils.js"></script>
    <script type="text/javascript" src="resources/initShaders.js"></script>
    <script type="text/javascript" src="resources/MV.js"></script>
    <script type="text/javascript" src="cube.js"></script>
    

  </head>

  <body>
	  <!--nav-->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Mock3D</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="#">Project</a></li>
            <li><a href="#">Papers</a></li>
            <li><a href="#">Download</a></li>
            <li><a href="#">About</a></li>
          </ul>
        </div>
      </div>
    </nav>

	  <!--content-->
    <div class="container-fluid">
      <div class="row row-offcanvas row-offcanvas-left">
        <!--Left Column start-->
        <div class="col-sm-2 sidebar sidebar-left sidebar-offcanvas">
       
            <div class="main_button_container">
                 <div class="main_button"> 
                     <input type = "submit" class ="btn btn-default btn-mycustom" value="Save Proj">
                 </div>
                 <div class="main_button"> 
                     <input type = "submit" class ="btn btn-default btn-mycustom" value="Load Proj">
                 </div>
                 <div class="main_button"> 
                     <input type = "submit" class ="btn btn-default btn-mycustom" value="Export JS">
                 </div>
                 <div class="main_button"> 
                     <input type = "submit" class ="btn btn-default btn-mycustom" value="Export Img">
                 </div>
                 <div class="clearfix"></div>
           </div>
			
          
           <ul class="myAccordion" id = "accordion_L">
          	  <!--Basic Images-->
            <li class="panel">
            	<a class="myControlTitle" data-toggle= "collapse" data-parent= "#accordion_L" href="#basicImages"> 
                      Basic Images 	
               </a>
               <div id = "basicImages" class= "inCollapse collapse in" > 
               	  <div class = "imgbox_container">
                  	<h6>Shape Image</h6>
                    <div>
                		  <div id = "container3" class="imgThumb_container">
                        <div class="btn-file">
                          <input type="file" id = "inputFileToLoad3" >
                        </div>
                        <div id = "container3image" class="imgThumb"> </div>
                      </div>
                    </div>
                    
                  </div>
                  <div class = "imgbox_container">
                  	<h6>Bright Image</h6>
                    <div>
                		  <div id = "container2" class="imgThumb_container">
                        <div class="btn-file">
                          <input type="file" id = "inputFileToLoad2" >
                        </div>
                        <div id = "container2image" class="imgThumb"> </div>
                      </div>
                    </div>
                  </div>
                  <div class = "imgbox_container">
                  	<h6>Dark Image</h6>
                		<div>
                      <div id = "container1" class="imgThumb_container">
                        <div class="btn-file">
                          <input type="file" id = "inputFileToLoad1" >
                        </div>
                        <div id = "container1image" class="imgThumb"> </div>
                      </div>
                    </div>
                  </div>
                  <div>
                  	<h6>Style Control</h6>
                  	<div class="slider_box">
                    		<input id="styleControl_slider" data-slider-id='customSlider' type="text" class="span2" value="" />
                    </div>
                  	<div >
                  		<div class = "h7 inlineBlock">Bright</div>   
                    		<div class = "h7 pull-right">Dark</div>
                  	</div>
                  </div>
            	</div>	
            </li>
             <!--Additional Alpha Control-->
            <li class="panel">
            	<a class="myControlTitle collapsed" data-toggle="collapse" data-parent = "#accordion_L" href="#alphaControl">Additional Alpha Control</a>
               <div id = "alphaControl" class= "inCollapse collapse"> 
               	  <div class="imgbox_container">
                  		<h6>Bright Image</h6>
                      <div>
                        <div class="imgThumb_container">
                          <div class="imgThumb"> </div>
                        </div>
                      </div>
                	</div>
                    
                  <div class="slider_container">
                       <span class="h6 inlineBlock"> Alpha in Red </span>
                       <div class="pull-right">
                       	 <input type="text" class="form-control mytextbox text-center" id="alphaInRed_val" value="1">
                       </div>
                       <div class="slider_box">
                       	 <input id="alphaInRed_slider" data-slider-id='customSlider' type="text" data-slider-min="0" data-slider-max="1" data-slider-step="0.01" data-slider-value="1"/>
                       </div>
                  </div>
                  <div class="slider_container">
                       <span class="h6 inlineBlock"> Alpha in Green </span>
                       <div class="pull-right">
                       	 <input type="text" class="form-control mytextbox text-center" id="alphaInGreen_val" value="1">
                       </div>
                       <div class="slider_box">
                       	 <input id="alphaInGreen_slider" data-slider-id='customSlider' type="text" data-slider-min="0" data-slider-max="1" data-slider-step="0.01" data-slider-value="1"/>
                       </div>
                  </div>
                  <div class="slider_container">
                       <span class="h6 inlineBlock"> Alpha in Blue </span>
                       <div class="pull-right">
                       	 <input type="text" class="form-control mytextbox text-center" id="alphaInBlue_val" value="1">
                       </div>
                       <div class="slider_box">
                       	 <input id="alphaInBlue_slider" data-slider-id='customSlider' type="text" data-slider-min="0" data-slider-max="1" data-slider-step="0.01" data-slider-value="1"/>
                       </div>
                  </div>
            	</div>	
            </li>
          </ul>
          
          
          
        </div>
        <!--Left Column end-->
        <!--Main Canvas start-->
        <div class="col-sm-8 main">
        	<!--
        	<p class="pull-left visible-xs">
            	<button type="button" class="btn btn-primary btn-xs" data-toggle="offcanvas">Toggle nav</button>
          </p>
          -->
         	<!-- 
          <img src="img/solidColor.jpg" class="img-responsive" alt="our canvas"> 
          -->
          <div class="canvas_container">
            <canvas id="gl-canvas" >
              Oops ... your browser doesn't support the HTML5 canvas element
            </canvas>
          </div>
        
        </div>
        <!--Main Canvas end-->
        
        <!--Right column start-->
        <div class="col-sm-2 sidebar sidebar-right">
          <ul class="myAccordion" id = "accordion_R">
            <!--Light-->
            <li class="panel">
            	 <a class = "myControlTitle collapsed" data-toggle= "collapse" data-parent= "#accordion_R" href="#lightControl"> 
                		Light 
               </a>
               <div id = "lightControl" class= "inCollapse collapse" > 
                   <div class = "checkbox">
                        <label>
                         		<span class="h6 inlineBlock" >Show lights Position</span>
                             <div class = "checkbox_container pull-right">
                             	  <input type="checkbox" >
                             </div>
                       
                        </label>
                    </div>
                    <div class="btn_container ">
                       <input type = "submit" class ="btn btn-default btn-block" value="addLight">
                    </div>
            	</div>	
                
            </li>
            <!--Shadow-->
            <li class="panel">
            	<a class = "myControlTitle collapsed" data-toggle="collapse" data-parent = "#accordion_R" href="#shadow">Shadow<span class="sr-only">(current)</span></a>
              <div id = "shadow" class= "inCollapse collapse"> 
               	<div class="checkbox">
                       <label>
                           <span class = "h6 inlineBlock"> Show Shadow </span>
                           <div class = "checkbox_container pull-right">
                           	<input type="checkbox">
                           </div>
                       </label>
                  </div>
                  <div class="slider_container">
                       <span class="h6 inlineBlock"> Sample size </span>
                       <div class="pull-right">
                       	 <input type="text" class="form-control mytextbox text-center" id="sha_sampleSize_val" value="1">
                       </div>
                       <div class="slider_box">
                       	 <input id="sha_sampleSize_slider" data-slider-id='customSlider' type="text" data-slider-min="0" data-slider-max="1" data-slider-step="0.01" data-slider-value="1"/>
                       </div>
                  </div>
                  <div class="slider_container">
                       <span class="h6 inlineBlock"> Number of Sample </span>
                       <div class="pull-right">
                       	 <input type="text" class="form-control mytextbox text-center" id="sha_numberOfSample_val" value="1">
                       </div>
                       <div class="slider_box">
                       	 <input id="sha_numberOfSample_slider" data-slider-id='customSlider' type="text" data-slider-min="0" data-slider-max="1" data-slider-step="0.01" data-slider-value="1"/>
                       </div>
                  </div>
            	</div>	
            </li>
            <!--Ambient Occlusion-->
            <li class="panel">
            	<a class = "myControlTitle collapsed" data-toggle="collapse" data-parent = "#accordion_R" href="#aoControl">
                		Ambient Occlusion			 				
              </a>
              <div id = "aoControl" class= "inCollapse collapse"> 
               	<div class="checkbox">
                       <label>
                           <span class = "h6 inlineBlock"> Show Ambient </span>
                           <div class = "checkbox_container pull-right">
                           	 <input type="checkbox">
                           </div>
                       </label>
                  </div>
                  <div class="slider_container">
                       <span class="h6 inlineBlock"> Sample size </span>
                       <div class="pull-right">
                       	 <input type="text" class="form-control mytextbox text-center" id="amb_sampleSize_val" value="1">
                       </div>
                       <div class="slider_box">
                       	 <input id="amb_sampleSize_slider" data-slider-id='customSlider' type="text" data-slider-min="0" data-slider-max="1" data-slider-step="0.01" data-slider-value="1"/>
                       </div>
                  </div>
                  <div class="slider_container">
                       <span class="h6 inlineBlock"> Number of Sample </span>
                       <div class="pull-right">
                       	 <input type="text" class="form-control mytextbox text-center" id="amb_numberOfSample_val" value="1">
                       </div>
                       <div class="slider_box">
                       	 <input id="amb_numberOfSample_slider" data-slider-id='customSlider' type="text" data-slider-min="0" data-slider-max="1" data-slider-step="0.01" data-slider-value="1"/>
                       </div>
                  </div>
            	</div>	
            </li>
             <!--Refraction-->
            <li class="panel">
            	<a class="myControlTitle collapsed" data-toggle="collapse" data-parent = "#accordion_R" href="#refractionControl">
                	  Refraction
               </a>
               <div id = "refractionControl" class= "inCollapse collapse"> 
               	<div class="imgbox_container">
                		<h6>Back ground image</h6>
                		<div>
                      <div id = "container5" class="imgThumb_container" >
                        <div class="btn-file">
                          <input type="file" id = "inputFileToLoad5" >
                        </div>
                        <div id = "container5image" class="imgThumb"> </div>
                      </div>
                    </div>
                	</div>
                    
                  <div class="slider_container">
                       <span class="h6 inlineBlock"> Refraction </span>
                       <div class="pull-right">
                       	 <input type="text" class="form-control mytextbox text-center" id="refraction_val" value="1">
                       </div>
                       <div class="slider_box">
                       	 <input id="refraction_slider" data-slider-id='customSlider' type="text" data-slider-min="0" data-slider-max="1" data-slider-step="0.01" data-slider-value="1"/>
                       </div>
                  </div>
                  <div class="slider_container">
                       <span class="h6 inlineBlock"> Translucency </span>
                       <div class="pull-right">
                       	 <input type="text" class="form-control mytextbox text-center" id="translucency_val" value="1">
                       </div>
                       <div class="slider_box">
                       	 <input id="translucency_slider" data-slider-id='customSlider' type="text" data-slider-min="0" data-slider-max="1" data-slider-step="0.01" data-slider-value="1"/>
                       </div>
                  </div>
            	</div>	
            </li>
             <!--Reflection-->
            <li class="panel">
            	<a class="myControlTitle collapsed" data-toggle="collapse" data-parent = "#accordion_R" href="#reflectionControl">
                	  Reflection
               </a>
               <div id = "reflectionControl" class= "inCollapse collapse"> 
               	<div class="checkbox">
                       <label>
                           <span class = "h6 inlineBlock"> Toggle Mirror </span>
                           <div class = "checkbox_container pull-right">
                           	 <input type="checkbox">
                           </div>
                       </label>
                  </div>
                	<div class="imgbox_container">
                		<h6>Environment image</h6>
                		<div>
                      <div id = "container4" class="imgThumb_container">
                        <div class="btn-file">
                          <input type="file" id = "inputFileToLoad4" >
                        </div>
                        <div id = "container4image" class="imgThumb"> </div>
                      </div>
                    </div>
                	</div>
                    
                  <div class="slider_container">
                       <span class="h6 inlineBlock"> Bluriness </span>
                       <div class="pull-right">
                       	 <input type="text" class="form-control mytextbox text-center" id="bluriness_val" value="1">
                       </div>
                       <div class="slider_box">
                       	 <input id="bluriness_slider" data-slider-id='customSlider' type="text" data-slider-min="0" data-slider-max="1" data-slider-step="0.01" data-slider-value="1"/>
                       </div>
                  </div>
            	</div>	
            </li>
             <!--Quality-->
            <li class="panel">
            	<a class="myControlTitle collapsed" data-toggle="collapse" data-parent = "#accordion_R" href="#qualityControl">
                	  Quality 
               </a>
               <div id = "qualityControl" class= "inCollapse collapse"> 
               	<div class="slider_container">
                       <span class="h6 inlineBlock"> Shape Map Quality </span>
                       <div class="pull-right">
                       	 <input type="text" class="form-control mytextbox text-center" id="smQuality_val" value="1">
                       </div>
                       <div class="slider_box">
                       	 <input id="smQuality_slider" data-slider-id='customSlider' type="text" data-slider-min="0" data-slider-max="1" data-slider-step="0.01" data-slider-value="1"/>
                       </div>
                  </div>
            	</div>	
            </li>
                
            
            
          </ul>
        </div>
        <!--Right column end-->
      </div>
    </div>


    <!-- Bootstrap core JavaScript  ================================================== -->

    <script src="js/bootstrap.min.js"></script> 
    <script src="js/bootstrap-slider.js"></script>
    <script src="js/mock3d.js"></script> 
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="js/ie10-viewport-bug-workaround.js"></script>

    <!-- More -->
    <script type="text/javascript" src="dragndrop.js"></script>
    
  </body>
</html>
